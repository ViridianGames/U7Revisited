--- Global constants and flags for U7Revisited
--- This file is loaded before all other scripts to provide common constants

-- some helper functions for tables
function table.find(t, val)
    for i, v in ipairs(t) do
        if v == val then return i end
    end
    return nil
end

function table.contains(t, val)
    return table.find(t, val) ~= nil
end

-- Skill/Attribute constants for get_training_level and related functions
SKILL_STRENGTH = 0
SKILL_DEXTERITY = 1
SKILL_INTELLIGENCE = 2
SKILL_COMBAT = 4
SKILL_MAGIC = 6

-- NPC ID constants
NPC_AVATAR = 0  -- The player character

-- Party member indices (negative indices for get_party_member)
PARTY_SPARK = -1
PARTY_SHAMINO = -2
PARTY_IOLO = -3
-- Note: Positive NPC IDs (1, 2, 3, etc.) refer to actual NPC IDs in the world
-- Shamino = NPC ID 2
-- Iolo = NPC ID 3

-- Common global flags (from U7 documentation)
-- GENERAL GAME FLAGS (0-19)
FLAG_SEEN_TETRA = 0
FLAG_SEEN_SPHERE = 1
FLAG_SEEN_CUBE = 2
FLAG_TETRA_GONE = 3
FLAG_SPHERE_GONE = 4
FLAG_CUBE_GONE = 5
FLAG_JOIN_FELLOW = 6
FLAG_TL_SAID_PENUMBRA = 7
FLAG_TL_SAID_BRION = 8
FLAG_SEEN_BLACK_GATE = 9
FLAG_MET_IOLO = 10
FLAG_MET_SPARK = 11
FLAG_MET_SHAMINO = 12
FLAG_MET_DUPRE = 13
FLAG_MET_JAANA = 14
FLAG_MET_TRELLEK = 15
FLAG_MET_SENTRI = 16
FLAG_MET_JULIA = 17
FLAG_MET_KATRINA = 18
FLAG_MET_TSERAMED = 19

-- TRINSIC FLAGS (20-46)
FLAG_IOLO_START_GAME = 20
FLAG_ENTER_STABLES = 21
FLAG_GOT_PASSWORD = 22
FLAG_OPEN_CHRIS_CHEST = 23
FLAG_SPARK_SAID_FELLOW = 24
FLAG_GILBERTO_SAID_CROWN = 25
FLAG_KLOG_SAID_COMPANIONS = 26
FLAG_ASKED_FOR_PASSWORD = 27
FLAG_SPARK_SAID_HOOK = 28
FLAG_TRIED_TO_PAY = 29
FLAG_NOT_PAID_YET = 30
FLAG_TOLD_SPARK_NAME = 31
FLAG_TOLD_SPARK_AVAT = 32
FLAG_FINN_SAID_KEY = 33
FLAG_SPARK_ASKED_JOIN = 34
FLAG_MET_PETRE = 35
FLAG_MET_FINNIGAN = 36
FLAG_MET_GILBERTO = 37
FLAG_MET_JOHNSON = 38
FLAG_MET_KLOG = 39
FLAG_MET_ELLEN = 40
FLAG_MET_APOLLONIA = 41
FLAG_MET_CHANTU = 42
FLAG_MET_DELL = 43
FLAG_MET_MARKUS = 44
FLAG_MET_GARGAN = 45
FLAG_MET_CAROLINE = 46

-- BRITAIN FLAGS (47-130)
FLAG_SEEN_BRITISH = 47
FLAG_SAID_MAGIC = 48
FLAG_COSTUME_QUEST = 49
FLAG_GOT_COSTUME = 50
FLAG_MIRANDA_SAID_MAX = 51
FLAG_BILL_QUEST = 52
FLAG_SHAMINO_SAID_AMBER = 53
FLAG_SHAMINO_SAID_MAGIC = 54
FLAG_AMBER_SAID_SHAMINO = 55
FLAG_AMBER_SAID_SETTLE = 56
FLAG_CHUCKLES_GAVE_SCROLL = 57
FLAG_BENNIE_GAVE_MUTTON = 58
FLAG_BOOTS_SAID_MEAT = 59
FLAG_MEAT_QUEST = 60
FLAG_CHUCKLES_SAID_GAME = 61
FLAG_BATLIN_PACKAGE = 62
FLAG_NELL_SAID_FIANCE = 63
FLAG_NELL_SAID_CHARLES = 64
FLAG_NELL_DISTRUSTS = 65
FLAG_TOLD_NELL_NAME = 66
FLAG_TOLD_NELL_AVAT = 67
FLAG_NELL_SAID_CHILD = 68
FLAG_CHARLES_SAID_JEANETTE = 69
FLAG_CHARLES_SAID_NELL = 70
FLAG_JEANETTE_SAID_CHARLES = 71
FLAG_JEANETTE_SAID_CONSIDER = 72
FLAG_PATTERSON_SAID_BROWNIE = 73
FLAG_CANDICE_SLIPS = 74
FLAG_JUDITH_SUSPICIOUS = 75
FLAG_NANNA_SAID_CLASS = 76
FLAG_TOLD_LUCY_NAME = 77
FLAG_TOLD_LUCY_AVAT = 78
FLAG_JEANETTE_SAID_WILLY = 79
FLAG_MET_BRIT = 80
FLAG_MET_NYSTUL = 81
FLAG_MET_CHUCKLES = 82
FLAG_MET_BATLIN = 83
FLAG_MET_RAYMUNDO = 84
FLAG_MET_JESSE = 85
FLAG_MET_STUART = 86
FLAG_MET_AMBER = 87
FLAG_MET_KRISTY = 88
FLAG_MET_MAX = 89
FLAG_MET_NICHOLAS = 90
FLAG_MET_NANNA = 91
FLAG_MET_CSIL = 92
FLAG_MET_ZELLA = 93
FLAG_MET_LUCY = 94
FLAG_MET_GREG = 95
FLAG_MET_NENO = 96
FLAG_MET_JUDITH = 97
FLAG_MET_CANDICE = 98
FLAG_MET_CYNTHIA = 99
FLAG_MET_PATTERSON = 100
FLAG_MET_CARROCIO = 101
FLAG_MET_FIGG = 102
FLAG_MET_JAMES = 103
FLAG_MET_JEANETTE = 104
FLAG_MET_KESSLER = 105
FLAG_MET_DENBY = 106
FLAG_MET_FRED = 107
FLAG_MET_KELLY = 108
FLAG_MET_WILLY = 109
FLAG_MET_GAYE = 110
FLAG_MET_COOP = 111
FLAG_MET_GRAYSON = 112
FLAG_MET_DIANE = 113
FLAG_MET_CLINT = 114
FLAG_MET_GORDON = 115
FLAG_MET_SEAN = 116
FLAG_MET_BROWNIE = 117
FLAG_MET_MAC = 118
FLAG_MET_SNAZ = 119
FLAG_MET_MILLIE = 120
FLAG_MET_GEOFFREY = 121
FLAG_MET_WISLEM = 122
FLAG_MET_SHERRY = 123
FLAG_MET_BOOTS = 124
FLAG_MET_BENNIE = 125
FLAG_MET_WESTON = 126
FLAG_MET_MIRANDA = 127
FLAG_MET_INWISLOKLEM = 128
FLAG_MET_NELL = 129
FLAG_MET_CHARLES = 130

-- COVE FLAGS (131-145)
FLAG_BILL_QUEST_DONE = 131
FLAG_RUDYOM_GAVE_IWAN = 132
FLAG_DEMAR_TOLD_STORY = 133
FLAG_NAST_SAID_JULIUS = 134
FLAG_JULIUS_QUEST = 135
FLAG_HEATHER_SAID_NAST = 136
FLAG_HEATHER_SAID_LOVERS = 137
FLAG_SEEN_IWAN = 138
FLAG_MET_RUDYOM = 139
FLAG_MET_NASTASSIA = 140
FLAG_MET_RAYBURT = 141
FLAG_MET_LORD_HEATHER = 142
FLAG_MET_PAMELA = 143
FLAG_MET_ZINAIDA = 144
FLAG_MET_DE_MARIA = 145

-- MINOC FLAGS (146-180)
FLAG_JAK_SAID_GYPS = 146
FLAG_JAK_SAID_KAR_ATT = 147
FLAG_KAR_SAID_JAK_CUTE = 148
FLAG_MAYOR_CANCELLED_STATUE = 149
FLAG_JAK_SAID_BROTHER = 150
FLAG_OWEN_SAID_CROWN = 151
FLAG_OWEN_SAID_HOOK = 152
FLAG_OWEN_TOOK_GOLD = 153
FLAG_OWEN_GAVE_GOLD = 154
FLAG_JULIA_SAID_SHOW_MAYOR = 155
FLAG_MINOC_MURDERS = 156
FLAG_SEARA_SAID_SASHA = 157
FLAG_FORTUNE_TOLD = 158
FLAG_JULIA_KICKED_OUT = 159
FLAG_PACKAGE_DELIVERED = 160
FLAG_PACKAGE_OPENED = 161
FLAG_RUTH_SAID_HOOK = 162
FLAG_MET_ELYNOR = 163
FLAG_MET_GREGOR = 164
FLAG_MET_MARGARETA = 165
FLAG_MET_SASHA = 166
FLAG_MET_GLADSTONE = 167
FLAG_MET_XANTHIA = 168
FLAG_MET_ZORN = 169
FLAG_MET_SEARA = 170
FLAG_MET_KARL = 171
FLAG_MET_OWEN = 172
FLAG_MET_BURNSIDE = 173
FLAG_MET_RUTHERFORD = 174
FLAG_MET_WILLIAM = 175
FLAG_MET_KARENNA = 176
FLAG_MET_JAKHER = 177
FLAG_MET_JERGI = 178
FLAG_MET_MIKOS = 179
FLAG_MET_FODUS = 180

-- EMPATH ABBEY/YEW FLAGS (181-217)
FLAG_HOOK_POST = 181
FLAG_WISP_SAID_GUARDIAN = 182
FLAG_REYNA_MOM = 183
FLAG_JULIUS_QUEST_DONE = 184
FLAG_SIGN_DOC = 185
FLAG_DOC_SIGNED = 186
FLAG_IN_JAIL = 187
FLAG_ENCHANTED_HOURGLASS = 188
FLAG_TAV_EXPLAIN = 189
FLAG_KREG_INVIS = 190
FLAG_SARA_TREL = 191
FLAG_TREL_PERMIT = 192
FLAG_ASK_SARA = 193
FLAG_WISP_SAID_ALAGNER = 194
FLAG_WISP_SAID_EAST = 195
FLAG_DREL_SAID_HOOK = 196
FLAG_MET_EMP = 197
FLAG_MET_SARALEK = 198
FLAG_MET_TAVENOR = 199
FLAG_MET_SALAMON = 200
FLAG_MET_NICODEMUS = 201
FLAG_MET_THAD = 202
FLAG_MET_BRADMAN = 203
FLAG_MET_SIR_JEFF = 204
FLAG_MET_TIERY = 205
FLAG_MET_PERRIN = 206
FLAG_MET_REYNA = 207
FLAG_MET_TAYLOR = 208
FLAG_MET_KREG = 209
FLAG_MET_GHARL = 210
FLAG_MET_DREL = 211
FLAG_MET_SMITH = 212
FLAG_MET_AIMI = 213
FLAG_MET_PENNI = 214
FLAG_MET_BEN = 215
FLAG_MET_GOTH = 216
FLAG_MET_WISP = 217

-- JHELOM FLAGS (218-233)
FLAG_HONOR_FLAG_RETURNED = 218
FLAG_AVATAR_BET_ON_SPRELLIC = 219
FLAG_BETS_SPRELLIC_DIES = 220
FLAG_FALSE_FLAG = 221
FLAG_FALSE_FLAG_GIVEN = 222
FLAG_SPRELLIC_DUELS = 223
FLAG_DUELS_SHUT_OFF = 224
FLAG_MET_DE_SNEL = 225
FLAG_MET_JOSEPH = 226
FLAG_MET_CLIFTON = 227
FLAG_MET_OPHELIA = 228
FLAG_MET_DAPHNE = 229
FLAG_MET_SPRELLIC = 230
FLAG_MET_VOKES = 231
FLAG_MET_SYRIA = 232
FLAG_MET_TIMMONS = 233

-- NEW MAGINCIA FLAGS (234-248)
FLAG_ALAGNER_QUEST = 234
FLAG_HENRY_ASKED_FIND_LOCKET = 235
FLAG_MAGENTA_FOUND_LOCKET = 236
FLAG_AVATAR_HAS_LOCKET = 237
FLAG_THREE_STRANGERS = 238
FLAG_MET_ALAGNER = 239
FLAG_MET_RUSSELL = 240
FLAG_MET_BORIS = 241
FLAG_MET_MAGENTA = 242
FLAG_MET_HENRY = 243
FLAG_MET_CONSTANCE = 244
FLAG_MET_ROBIN = 245
FLAG_MET_BATTLES = 246
FLAG_MET_LEAVELL = 247
FLAG_MET_SAM = 248

-- SKARA BRAE FLAGS (249-297)
FLAG_TORT_GAVE_ANSWER = 249
FLAG_ISLAND_DOCK = 250
FLAG_FIND_SACRIFICE = 251
FLAG_FERR_SACRIFICE = 252
FLAG_MARKHAM_SACRIFICE = 253
FLAG_PAULETTE_SACRIFICE = 254
FLAG_QUEN_SACRIFICE = 255
FLAG_ROWENA_SACRIFICE = 256
FLAG_TRENT_SACRIFICE = 257
FLAG_FORSYT_SACRIFICE = 258
FLAG_MORDRA_SACRIFICE = 259
FLAG_TORT_SACRIFICE = 260
FLAG_FOUND_SACRIFICE = 261
FLAG_WELL_DESTROYED = 262
FLAG_CRY_PAULETTE = 263
FLAG_TRENT_AWARE = 264
FLAG_REUNITED = 265
FLAG_MUSIC_BOX = 266
FLAG_CAGE_MADE = 267
FLAG_BOX_FIRST_TIME = 268
FLAG_LICHE_GONE = 269
FLAG_GAVE_STAFF = 270
FLAG_WELL_QUEST = 271
FLAG_DONE_HORANCE = 272
FLAG_TAKE_ROWENA_HOME = 273
FLAG_LICHE_TRAPPED = 274
FLAG_SKARA_BRAE_DONE = 275
FLAG_MADE_FORMULA = 276
FLAG_SEANCE_TORT_ONE = 277
FLAG_SEANCE_FERRYMAN = 278
FLAG_SEANCE_MARKHAM = 279
FLAG_SEANCE_LICHE = 280
FLAG_SEANCE_TRENT = 281
FLAG_SEANCE_MORDRA = 282
FLAG_SEANCE_ROWENA = 283
FLAG_SEANCE_PAULETTE = 284
FLAG_SEANCE_QUENTON = 285
FLAG_SEANCE_FORSYTHE = 286
FLAG_MET_TORT_ONE = 287
FLAG_MET_FERRYMAN = 288
FLAG_MET_MARKHAM = 289
FLAG_MET_LICHE = 290
FLAG_MET_HORANCE = 291
FLAG_MET_TRENT = 292
FLAG_MET_MORDRA = 293
FLAG_MET_ROWENA = 294
FLAG_MET_PAULETTE = 295
FLAG_MET_QUENTON = 296
FLAG_MET_FORSYTHE = 297

-- SHRINE OF SPIRITUALITY FLAGS (298-300)
FLAG_HOURGLASS_QUEST = 298
FLAG_TL_GAVE_MISSION = 299
FLAG_MET_TIME_LORD = 300

-- MOONGLOW FLAGS (301-343)
FLAG_REC_TOL = 301
FLAG_CUB_TOL = 302
FLAG_CUB_MOR = 303
FLAG_BAL_TEL = 304
FLAG_GOT_FOOD = 305
FLAG_ZELDA_LOV = 306
FLAG_BRION_ZEL = 307
FLAG_NEL_ZEL = 308
FLAG_BRION_CRY = 309
FLAG_ADDOM_PEN = 310
FLAG_BLACKROCK_QUEST = 311
FLAG_RING_QUEST = 312
FLAG_RING_ENCHANTED = 313
FLAG_BLACKROCK_DONE = 314
FLAG_ZELDA_RESPOND = 315
FLAG_NEL_STAND = 316
FLAG_NEL_MARK = 317
FLAG_NEL_QUILL = 318
FLAG_NEL_BOOK = 319
FLAG_BRI_CHEESE = 320
FLAG_BRI_MAGNIFY = 321
FLAG_BRI_KITE = 322
FLAG_BRI_SHOWN = 323
FLAG_NEL_SHOWN = 324
FLAG_GOT_CRYSTAL = 325
FLAG_SAID_NO = 326
FLAG_MET_BRION = 327
FLAG_MET_PENUMBRA = 328
FLAG_MET_NELSON = 329
FLAG_MET_ZELDA = 330
FLAG_MET_MARIAH = 331
FLAG_MET_RANKIN = 332
FLAG_MET_BALAYNA = 333
FLAG_MET_TOLEMAC = 334
FLAG_MET_CUB = 335
FLAG_MET_MORZ = 336
FLAG_MET_JILLIAN = 337
FLAG_MET_EFFREM = 338
FLAG_MET_CHAD = 339
FLAG_MET_ELAD = 340
FLAG_MET_PHEARCY = 341
FLAG_MET_ADDOM = 342
FLAG_MET_FRANK = 343

-- PAWS FLAGS (344-363)
FLAG_GOT_HOURGLASS = 344
FLAG_STOLEN_VENOM = 345
FLAG_FERIDWYN_ACCUSED_TOBIAS = 346
FLAG_MORFIN_TAUNTED_AVATAR = 347
FLAG_MERRICK_TAUNTED_AVATAR = 348
FLAG_THURSTON_LOVES_POLLY = 349
FLAG_MET_THURSTON = 350
FLAG_MET_FERIDWYN = 351
FLAG_MET_BRITA = 352
FLAG_MET_ALINA = 353
FLAG_MET_MERRICK = 354
FLAG_MET_GARRITT = 355
FLAG_MET_MORFIN = 356
FLAG_MET_BEVERLEA = 357
FLAG_MET_KOMOR = 358
FLAG_MET_FENN = 359
FLAG_MET_ANDREW = 360
FLAG_MET_CAMILLE = 361
FLAG_MET_TOBIAS = 362
FLAG_MET_POLLY = 363

-- TERFIN FLAGS (364-385)
FLAG_DRAX_KNOWS = 364
FLAG_DRAX_INAMO = 365
FLAG_TOLD_INAMO_DEAD = 366
FLAG_DRAX_SAID_SULTAN = 367
FLAG_INFOR_QUAN = 368
FLAG_INMAN_SILAMO = 369
FLAG_QUAEVEN_CONVERT = 370
FLAG_FOUND_NOTE = 371
FLAG_SARPLING_SPILLED = 372
FLAG_QUAN_SARP = 373
FLAG_PLOT_TOLD = 374
FLAG_MET_DRAX = 375
FLAG_MET_INFORLEM = 376
FLAG_MET_INMANILEM = 377
FLAG_MET_TEREGUS = 378
FLAG_MET_RUNEB = 379
FLAG_MET_QUAN = 380
FLAG_MET_QUAEVEN = 381
FLAG_MET_SILAMO = 382
FLAG_MET_SARPLING = 383
FLAG_MET_FORBRAK = 384
FLAG_MET_BETRA = 385

-- SPEKTRAN FLAGS (386)
FLAG_MET_MARTINGO = 386

-- SERPENT'S HOLD FLAGS (387-408)
FLAG_GOT_CHIPS = 387
FLAG_TOLD_JORDAN_NAME = 388
FLAG_TOLD_JORDAN_AVAT = 389
FLAG_JORDAN_JEHANNE = 390
FLAG_JEHANNE_TOLD = 391
FLAG_TELL_STATUE = 392
FLAG_GARG_BLOOD = 393
FLAG_AVA_REFUSED = 394
FLAG_SOLVED = 395
FLAG_HORFFE_BLAMED = 396
FLAG_JP_ASKED = 397
FLAG_MET_MENION = 398
FLAG_MET_PENDARAN = 399
FLAG_MET_JEHANNE = 400
FLAG_MET_JOHN_PAUL = 401
FLAG_MET_RICHTER = 402
FLAG_MET_HORFFE = 403
FLAG_MET_JORDAN = 404
FLAG_MET_DENTON = 405
FLAG_MET_TORY = 406
FLAG_MET_LEIGH = 407
FLAG_MET_IAN = 408

-- VESPER FLAGS (409-432)
FLAG_CAT_CAUGHT = 409
FLAG_YVELLA_WORRY = 410
FLAG_BOUGHT_MUCH = 411
FLAG_BLORN_TELL = 412
FLAG_BLORN_GIVE = 413
FLAG_LAP_TELL = 414
FLAG_YONGI_BLORN = 415
FLAG_MET_CADOR = 416
FLAG_MET_MARA = 417
FLAG_MET_ZAKSAM = 418
FLAG_MET_ELDROTH = 419
FLAG_MET_YONGI = 420
FLAG_MET_BLORN = 421
FLAG_MET_AUSTON = 422
FLAG_MET_LIANA = 423
FLAG_MET_LAP = 424
FLAG_MET_YVELLA = 425
FLAG_MET_CATHERINE = 426
FLAG_MET_FOR = 427
FLAG_MET_ANSIKART = 428
FLAG_MET_WIS = 429
FLAG_MET_ANMANIVAS = 430
FLAG_MET_FORANAMO = 431
FLAG_MET_AURVID = 432

-- BUCCANEER'S DEN FLAGS (433-459)
FLAG_TOLD_MARTINE_NAME = 433
FLAG_TOLD_MARTINE_AVAT = 434
FLAG_HAD_MARTINE = 435
FLAG_HAD_WENCH = 436
FLAG_HAD_ROBERTO = 437
FLAG_TOLD_WENCH_NAME = 438
FLAG_TOLD_WENCH_AVAT = 439
FLAG_TOLD_ROBERTO_NAME = 440
FLAG_TOLD_ROBERTO_AVAT = 441
FLAG_TOLD_BLACK_NAME = 442
FLAG_TOLD_BLACK_AVAT = 443
FLAG_BLACK_SAID_MISS = 444
FLAG_BLACKTOOTH_QUEST_DONE = 445
FLAG_MOLE_SAID_SORRY = 446
FLAG_MET_DANAG = 447
FLAG_MET_WENCH = 448
FLAG_MET_GLENNO = 449
FLAG_MET_MARTINE = 450
FLAG_MET_ROBERTO = 451
FLAG_MET_SINTAG = 452
FLAG_MET_BLACKTOOTH = 453
FLAG_MET_MOLE = 454
FLAG_MET_LUCKY = 455
FLAG_MET_BUDO = 456
FLAG_MET_GORDY = 457
FLAG_MET_MANDY = 458
FLAG_MET_SMITHY = 459

-- TRAVELLING SHOW FLAGS (460-462)
FLAG_MET_PAUL = 460
FLAG_MET_MERYL = 461
FLAG_MET_DUSTIN = 462
